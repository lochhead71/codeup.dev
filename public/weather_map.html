<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Friendly Weather Update</title>
	<link rel="stylesheet" href="/css/weather.css">
	<link href='https://fonts.googleapis.com/css?family=Courgette|Oswald:400,300,700' rel='stylesheet' type='text/css'></head>
<body>
	<header id="header">
		<h1 id="pageTitle">What's happening<br>with the weather?</h1>
		<img src="/img/weathMap_rainbow.png" alt="rainbow cloud logo" height="75px">
	</header>

	<main>
		<div class='lableButton'>
			<h2 class="boxTitle">3-Day Forecast:</h2>
			<div>
				<button class='toggle' id='morn'>Morning</button>
				<button class='toggle' id='aft'>Afternoon</button>
				<button class='toggle' id='eve'>Evening</button>
			</div>	
		</div>	
		<div class='forecast'></div>
		<div class='map'>
			<div class='coordinates'>
				<h2 class="boxTitle">Change location:</h2>
				<label for="long">Longitude</label>
				<input name="long" type="text" id="long">
				<label for="lat">Latitude</label>
				<input name="lat" type="text" id="lat">
				<button id='submit'>Submit</button>
			</div>
		</div>

	</main>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

	<script>
		"use strict";

		function capitalize(string) {
			string = string.split("");
			string[0] = string[0].toUpperCase();
			string = string.join("");
			return string;
		};

		function dayOfTheWeek(d){
			var weekday = new Array(7);
			weekday[0]=  "Sunday";
			weekday[1] = "Monday";
			weekday[2] = "Tuesday";
			weekday[3] = "Wednesday";
			weekday[4] = "Thursday";
			weekday[5] = "Friday";
			weekday[6] = "Saturday";
			return weekday[d.getDay()];
		};

		(function(){

			// setting default coordinates

			var lat = '29.423017';
			var lon = '-98.48527';

			// OpenWeatherMap API Call

			$.get("http://api.openweathermap.org/data/2.5/forecast", {
			    APPID: "5c70f220efd6630553be87a8a245afeb",
				lat: lat,
				lon: lon,
			    units: "imperial",
			    cnt:24
			}).done(function(data) {
				console.log(data);
				var weatherCond = "";

				// code to build my forecast objects

			    data.list.forEach(function(day, index) {
			    	weatherCond += "<div class='wrapper' data-id='" + index + "'>";
					weatherCond += "<h3 class='day'>" + dayOfTheWeek(new Date(day.dt*1000)) + "</h3>";
			    	weatherCond += "<h3 class='description'>" + capitalize(day.weather[0].description) + "</h3>";

			    	if (day.clouds.all <= 20) {
			    		weatherCond += "<img src='/img/weathMap_sunny.png' alt='sunny logo' height='60px'>";
			    	} else if ((day.clouds.all >= 21) && (day.clouds.all <= 70)) {
			    		weatherCond += "<img src='/img/weathMap_partlyCloudy.png' alt='partly cloudy logo' height='60px'>";
			    	} else if (day.clouds.all >=71){
			    		weatherCond += "<img src='/img/weathMap_cloudy.png' alt='cloudy logo' height='60px'>";
			    	};

			    	weatherCond += "<p class = 'stats'> <strong>Temperature:</strong><br>" + parseInt(day.main.temp) + "&deg; Fahrenheit</p>";
			    	if (day.main.temp <= 50) {
				    	weatherCond += "<img src='/img/weathMap_cold.png' alt='cold logo' height='60px'>"
					    } else if (day.main.temp >= 51 && day.main.temp <= 85) {
				    	weatherCond += "<img src='/img/weathMap_mild.png' alt='cold logo' height='60px'>"
					    } else if (day.main.temp >= 86) {
				    	weatherCond += "<img src='/img/weathMap_hot.png' alt='cold logo' height='60px'>"

					};
			    	weatherCond += "<p class = 'stats'><strong>Wind Speed:</strong><br>" + day.speed + " mph</p>";

			    	weatherCond += "</div>"
                });

		        // longitude and latitude inputs

				$("#submit").click(function() {
					lat = $('#long').val();
					lon = $('#lat').val();
					console.log(lat);
					console.log(lon);
				});

		        $(".forecast").append(weatherCond);

				// function to interate the node variables

				function displayToD(ids) {
					 $('div.wrapper').each(function(){
		        		if ($(this).data('id') != ids[0] && $(this).data('id') != ids[1] && $(this).data('id') != ids[2]) {
				            	$(this).hide();
						} else {
							$(this).show();
						};
					});
				};

				// default display setting

				displayToD([4, 12, 20]);
			
				// time of day toggle buttons

	            $('#morn').click(function() {
	            	displayToD([2, 10, 18]);

	            });

	             $('#aft').click(function() {
	            	displayToD([4, 12, 20]);
	            });

	             $('#eve').click(function() {
	            	displayToD([6, 14, 22]);
	            });

         	// closing .done function
			});
		// closing IFFE statement
		}());

	</script>
	
</body>
</html>